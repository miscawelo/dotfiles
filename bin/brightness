#!/usr/bin/env sh

icon="$HOME/bin/assets/icons/"

send_notif() {
  brightness=$(($(brightnessctl g) * 100 / 255))

  if [ $brightness -gt 75 ]; then
    icon=$icon"screenBrightnessMax.png"
  elif [ $brightness -gt 50 ]; then
    icon=$icon"screenBrightnessHigh.png"
  elif [ $brightness -gt 25 ]; then
    icon=$icon"screenBrightnessMed.png"
  else
    icon=$icon"screenBrightnessLow.png"
  fi

  dunstify "Brightness" "$(brightnessctl i | awk -F "'" '/Device/ {print $2}')" -a "System" -i "$icon" -h string:x-dunst-stack-tag:brightness -h int:value:"$brightness"
}

[ "$1" = "down" ] && brightnessctl set "$2"%- && send_notif && exit
[ "$1" = "up" ]   && brightnessctl set +"$2"% && send_notif && exit
